<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<?xml-stylesheet href="color.css" type="text/css"?>
<!--  /*
  * The contents of this file are subject to the Mozilla Public License
  * Version 1.1 (the "License");  you may not use this file except in compliance
  * with the License.  You may obtain a copy of the License at
  * http://www.mozilla.org/MPL/
  *
  * Software distributed under the License is distributed on an "AS IS" basis,
  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for
  * the specific language governing rights and limitations under the License.
  *
  * The Original Code is SemanticTurkey.
  *
  * The Initial Developer of the Original Code is University of Roma Tor Vergata.
  * Portions created by University of Roma Tor Vergata are Copyright (C) 2007.
  * All Rights Reserved.
  *
  * SemanticTurkey was developed by the Artificial Intelligence Research Group
  * (art.uniroma2.it) at the University of Roma Tor Vergata (ART)
  * Current information about SemanticTurkey can be obtained at 
  * http://semanticturkey.uniroma2.it
  *
  */ -->

<!-- Daniele Bagni, Marco Cappella (2009): E'la finestra in cui ï¿½ possibile scegliere di quali utenti visualizzare le risorse e con quale colore tra quelli disponibili visualizzarle -->
<window id="changeTreeColor" title="Tree Management Window"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"	
	width="300"
	height="550"
>

<groupbox class="whitebg">
  <caption class="header" label=" Tree Colors" image="images/st_favicon.png"/>

<vbox id="myPanel" align="center" flex="1">
<label id="labelColor" value="Choose the color for each user:"/>
 </vbox>
 <separator orient="orizontal" class="groove">
</separator>
<vbox id="myPanel" align="center" flex="1">
<hbox id="myPanelcolorRows" align="center" flex="1">

  <grid style="overflow:auto" height="400">
    <columns style="overflow:auto">
      <column flex="1"/>
      <column flex="2"/>
    </columns>
    <rows id="colorRows" style="overflow:auto">
    </rows>
  </grid>



</hbox>
</vbox>
</groupbox>

<vbox id="myPanel" align="center" flex="1">
<hbox id="myPanel" align="center" flex="1">
<button label="Accept" oncommand="saveAll()"/>
</hbox>
</vbox>

<script type="application/x-javascript" src="chrome://semantic-turkey/content/http/http.js"/>
<script type="application/x-javascript" src="chrome://semantic-turkey/content/scripts/selectServer.js"/>
<script type="application/x-javascript" src="chrome://semantic-turkey/content/scripts/ontName.js"/>
<script type="application/x-javascript" src="chrome://semantic-turkey/content/scripts/userProperties.js"/>
<script type="application/x-javascript" src="chrome://semantic-turkey/content/scripts/userType.js"/>

<script type="application/x-javascript">
   <![CDATA[
   if (typeof art_semanticturkey == 'undefined') var art_semanticturkey = {};
Components.utils.import("resource://stmodules/SemTurkeyHTTP.jsm", art_semanticturkey);
Components.utils.import("resource://stmodules/Logger.jsm", art_semanticturkey);
   
   		var server =readServer();
   		art_semanticturkey.HttpMgr.GETP("http://"+server+":1979/semantic_turkey/resources/stserver/STServer?service=userManagement&color=yes");
   		
       //Daniele Bagni, Marco Cappella (2009): Gestione grafica della scelta del colore
       	function changeLabelColor(numColor,numLabel){
       		
       		if(numColor=="-1"){
       			var label = document.getElementById("labelC"+numLabel);
       			label.setAttribute("class","cNo");
       			var menulstcurrent = document.getElementById("listC"+numLabel)
       			menulstcurrent.setAttribute("class","cNo");
       			menulstcurrent.setAttribute("label","No");
       		}
       		else{
       			var label = document.getElementById("labelC"+numLabel);
       			label.setAttribute("class","c"+numColor);
       			var menulstcurrent = document.getElementById("listC"+numLabel)
       			menulstcurrent.setAttribute("class","c"+numColor);
       			menulstcurrent.setAttribute("label",colors[numColor-1]);
       		}
       	}
       	
       	//Daniele Bagni, Marco Cappella (2009): Le scelte dei colori e degli utenti vengono scritte su un file
       	function saveAll(){
       	
       		for(var g=0;g<saveUsers.length;g++){	
       			var labelToSave=document.getElementById("labelC"+g);
       			var labelClass=labelToSave.getAttribute("class");
       			saveColor[g]=labelClass.substring(1,labelClass.length); //Prendo il numero del colore
       		}
       		writeProp(saveUsers,saveHash,saveColor);
       		window.close();
       	}
       	
   ]]>
</script> 



</window>

