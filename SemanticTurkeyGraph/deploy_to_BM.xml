<!--+
    |
    |           +=======================================+
    |           |  Semantic Turkey Graph Build System  |
    |           +=======================================+
    |
    +-->

<project default="final" basedir="." name="SemanticTurkeyGraph" xmlns:artifact="antlib:org.apache.maven.artifact.ant">

	<path id="maven-ant-tasks.classpath" path="./../SemanticTurkeyBM/antlib/maven-ant-tasks-2.0.10.jar" />
	<typedef resource="org/apache/maven/artifact/ant/antlib.xml" uri="antlib:org.apache.maven.artifact.ant" classpathref="maven-ant-tasks.classpath" />


	<target name="start" depends="final">


		<echo>======================================================================
               ${fullname} ${version} [${year}]
======================================================================
Building with ${ant.version}
----------------------------------------------------------------------
Using build file ${ant.file}
----------------------------------------------------------------------
Running on Java version ${ant.java.version} on ${os.name}
----------------------------------------------------------------------
Compiler options:
 - debug ......... [${compiler.debug}]
 - optimize ...... [${compiler.optimize}]
 - deprecation ... [${compiler.deprecation}]
======================================================================
</echo>
	</target>

	<target name="init">
		<!-- Set the timestamps -->
		<tstamp>
			<format property="builddate" pattern="yyyy-MM-d" />
		</tstamp>

		<property environment="env" />

		<!-- Get the build properties from an external file -->
		<property file="build.properties" />

	</target>

	<!-- === Deploy Libraries from Maven Dependencies to Semantic Turkey BM project  ========== -->

	<target name="buildlib" depends="init">
		<delete>
			<fileset dir="${bm.dir.applet}" includes="*.jar" />
		</delete>

		<artifact:pom id="stpom" file="pom.xml" />
		<artifact:dependencies filesetId="dependency.fileset" pomRefId="stpom" useScope="runtime" />
		<copy todir="${bm.dir.applet}">
			<fileset refid="dependency.fileset" />
			<!--
    	  <mapper classpathref="maven-ant-tasks.classpath"
    	          classname="org.apache.maven.artifact.ant.VersionMapper"
    	          from="${stdeps}" to="flatten" />
    	      -->
			<mapper type="flatten" />
		</copy>
	</target>

	<!-- === Copy resources to Semantic Turkey BM project ================================================= -->

	<target name="copy_resources" depends="buildlib">
		<copy todir="${bm.dir.lib}">
			<fileset dir="${dir.html}" includes="*.html" />
		</copy>
		<copy todir="${bm.dir.applet}">
			<fileset dir="${maven.target}" includes="*.jar" />
		</copy>
	</target>


	<!-- === Final Empty Task ================================================= -->

	<target name="final" depends="copy_resources" />

</project>
